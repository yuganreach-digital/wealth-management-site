---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import Navigation from '../components/Navigation.astro';
import Footer from '../components/Footer.astro';
import Section from '../components/Section.astro';
import Card from '../components/Card.astro';
---

<BaseLayout 
  title="AVITA FAMILY OFFICE SERVICES | Home"
  description="Purpose-driven family office services that preserve, grow, and protect multi-generational wealth."
>
  <Navigation />
  
  <!-- Hero Section -->
  <section id="hero">
    <Hero 
      isHomepage={true}
      title="AVITA FAMILY OFFICE SERVICES"
      subtitle="Purpose. Stewardship. Legacy."
      description={`We provide unparalleled wealth management that honours our clients' trust,\nensuring a legacy that endures for generations.`}
    />
  </section>
  
  <!-- Scroll Indicator -->
  <div class="scroll-indicator">
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
      <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5"/>
    </svg>
  </div>

  <!-- Overview Section -->
  <Section 
    id="overview"
    className="bg-slate-50"
  >
    <div class="max-w-4xl mx-auto space-y-6 text-slate-600 text-lg leading-relaxed">
      <p>
        Individuals and families with significant wealth require an integrated strategy in place to safeguard investments, put together wealth transfer strategies and proactively plan for growth. When coordination of assets such as businesses, homes, real estate investments, philanthropic funds and other investments becomes onerous, comprehensive management services from a family office can prove invaluable.
      </p>
      <p>
        While life is uncertain, your family's financial future should not be. Avita Family Office Services can help you determine how your finances can best fulfill your goals now, and in the future. Our specialized financial experts will oversee and manage your family's financial affairs, with a view towards building a legacy through preservation and growth of assets.
      </p>
    </div>
  </Section>

  <!-- The Avita Difference -->
  <Section 
    id="difference"
    title="The Avita Difference"
    description="We use our expertise, coupled with a 360-degree view toward wealth, well being and peace of mind. From preserving legacies and educating next generations, to advising on tax planning and lifestyle management. We bring compassionate and comprehensive counsel in all matters."
  >
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
      <Card 
        title="360-degree Planning"
        description="Our total wealth management solutions consider every aspect of your financial portfolio to help you properly plan into the future. We consider how the many facets of your life fit together: your assets, your goals, your family's needs, even your health. It is our view that wealth management extends way beyond one's financial assets. Responsible management necessitates considering them all."
        icon="chart"
        showLearnMore={false}
      />
      <Card 
        title="Clarity & Vision"
        description="Building wealth often necessitates engaging a roster of professionals for their different areas of expertise. Is there a master plan in place to guide the tax, legal, insurance and investment individuals providing you counsel? Avita works with teams of experts to deliver a singular, unifying vision. We begin with an overview of your entire financial picture; with your wishes and priorities identified, we then develop a master plan to ensure that all parties working for you are on the same page."
        icon="target"
        showLearnMore={false}
      />
      <Card 
        title="Confidential Counsel"
        description="The perspective of a third party such as Avita facilitates open communication, voicing concerns, and approaching topics that many families find difficult to speak about. Our experts provide the right feedback in order to determine an appropriate course of action, confidentially and compassionately."
        icon="scale"
        showLearnMore={false}
      />
      <Card 
        title="Intergenerational Support"
        description="Often, families or younger generations require counsel on how to manage a legacy. We serve as a financial advisory connection between family members, and as a coach for younger generations. Our inheritance and estate services assist them with money management, capital preservation and the tax implications of managing a significant estate."
        icon="handshake"
        showLearnMore={false}
      />
    </div>
  </Section>

  <!-- Comprehensive Advice -->
  <Section 
    id="advice"
    title="Comprehensive Advice. Always, in All Ways."
    description="Your Portfolio Manager is supported by a team of multi-disciplinary experts, each with their own area of expertise. Together, this team provides you with a bespoke plan tailored to your family's unique needs. Your best interests always come first."
    className="bg-slate-50"
  />

  <!-- Benefits -->
  <Section 
    id="benefits"
    className="bg-white"
  >
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <Card 
        title="Reclaim Your Time"
        description="Engage professional counsel, and spend your time enjoying what really matters versus managing the intricacies of your estate."
        icon="clock"
        showLearnMore={false}
      />
      <Card 
        title="Refine Your Legacy Plan"
        description="Let our wealth experts evaluate that all your assets, goals and current desires align as they should."
        icon="target"
        showLearnMore={false}
      />
      <Card 
        title="Elevate Your Peace of Mind"
        description="Enjoy the security of a trusted wealth management expert, backed by a strong advisory team."
        icon="shield"
        showLearnMore={false}
      />
    </div>
  </Section>

  <Footer />
</BaseLayout>

<style>
  .scroll-indicator {
    position: fixed;
    left: 50%;
    bottom: 2rem;
    transform: translateX(-50%);
    z-index: 40;
    cursor: pointer;
    transition: all 0.3s ease;
    width: 3rem;
    height: 3rem;
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.4);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: rgba(255, 255, 255, 0.6);
    animation: bounce 2s infinite;
  }
  
  .scroll-indicator:hover {
    transform: translateX(-50%) scale(1.1);
    color: rgba(255, 255, 255, 0.9);
    background: rgba(0, 0, 0, 0.5);
  }
  
  @keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
      transform: translateX(-50%) translateY(0);
    }
    40% {
      transform: translateX(-50%) translateY(-10px);
    }
    60% {
      transform: translateX(-50%) translateY(-5px);
    }
  }
</style>

<script>
  // Step-by-step hash navigation
  document.addEventListener('DOMContentLoaded', () => {
    const sections: string[] = ['hero', 'overview', 'difference', 'advice', 'benefits'];
    let currentSectionIndex = 0;
    
    // Find current section index on page load
    function findCurrentSectionIndex() {
      const scrollPosition = window.scrollY + 100;
      for (let i = sections.length - 1; i >= 0; i--) {
        const section = document.getElementById(sections[i]);
        if (section && scrollPosition >= section.offsetTop) {
          return i;
        }
      }
      return 0; // Default to first section
    }
    
    // Update current section index
    function updateCurrentSection() {
      currentSectionIndex = findCurrentSectionIndex();
    }
    
    // Scroll to next section
    function scrollToNextSection() {
      if (currentSectionIndex < sections.length - 1) {
        currentSectionIndex++;
        const nextSection = sections[currentSectionIndex];
        if (nextSection) {
          const targetElement = document.getElementById(nextSection);
          
          if (targetElement) {
            // Update URL hash
            window.history.pushState({}, '', `#${nextSection}`);
            
            // Scroll to section with buffer for buttons
            const elementTop = targetElement.offsetTop;
            const buffer = 35; // Extra pixels to show buttons
            window.scrollTo({
              top: elementTop + buffer,
              behavior: 'smooth'
            });
          }
        }
      }
    }
    
    // Add click listeners to scroll indicators
    const scrollIndicators = document.querySelectorAll('.scroll-indicator');
    scrollIndicators.forEach(indicator => {
      indicator.addEventListener('click', () => {
        updateCurrentSection();
        scrollToNextSection();
      });
    });

    // Handle direct hash navigation on page load
    if (window.location.hash) {
      const hash = window.location.hash.substring(1);
      const targetElement = document.getElementById(hash);
      if (targetElement) {
        setTimeout(() => {
          targetElement.scrollIntoView({ 
            behavior: 'smooth',
            block: 'start'
          });
          updateCurrentSection();
        }, 100);
      }
    }

    // Update navigation active state based on scroll position
    const navLinks = document.querySelectorAll('nav a[href^="#"]');
    
    function updateActiveNav() {
      let current: string = '';
      sections.forEach(sectionId => {
        const section = document.getElementById(sectionId);
        if (section) {
          const sectionTop = section.offsetTop;
          if (window.scrollY >= (sectionTop - 200)) {
            current = sectionId;
          }
        }
      });

      // Update URL hash based on current section
      if (current !== '' && window.location.hash !== '#' + current) {
        window.history.replaceState({}, '', '#' + current);
        updateCurrentSection();
      }

      navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${current}`) {
          link.classList.add('active');
        }
      });
    }

    window.addEventListener('scroll', updateActiveNav);
    
    // Initialize - start from hero section
    currentSectionIndex = 0;
    updateActiveNav();
  });
</script>
